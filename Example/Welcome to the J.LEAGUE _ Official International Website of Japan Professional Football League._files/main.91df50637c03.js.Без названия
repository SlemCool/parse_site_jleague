const IS_DESKTOP=769<=window.innerWidth,IS_TABLET=window.innerWidth<=768&&577<=window.innerWidth,IS_MOBILE=window.innerWidth<576,IS_SAFARI=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),SUPPORTED_LANGS=["en","id","th","vi"],TOKEN_KEY="csrftoken",langPrefix=new RegExp(`^/(${SUPPORTED_LANGS.join("|")})/`,"i")
let elementVisibleTimeout
function isDesktop(){return 769<=window.innerWidth}function isTablet(){return window.innerWidth<=768&&577<=window.innerWidth}function isMobile(){return window.innerWidth<576}function isFullScreen(){return Boolean(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)}function doFullScreen(e){if(isFullScreen())return!1
void 0===e&&(e=document.documentElement),document.fullscreenEnabled?e.requestFullscreen():document.webkitFullscreenEnabled?e.webkitRequestFullscreen():document.mozFullScreenEnabled?e.mozRequestFullScreen():document.msFullscreenEnabled&&e.msRequestFullscreen()}function setCookie(e,t,i=180){let o=""
var l
i&&((l=new Date).setTime(l.getTime()+24*i*60*60*1e3),o="; expires="+l.toUTCString()),document.cookie=e+"="+(t||"")+o+"; path=/"}function getCookie(e){var t,i=e+"="
for(t of document.cookie.split(";")){for(;" "===t.charAt(0);)t=t.substring(1,t.length)
if(0===t.indexOf(i))return t.substring(i.length,t.length)}return null}function delCookie(e){document.cookie=e+"=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;"}function checkTimezone(){var e=getCookie("jl_timezone")
let t;(t=void 0!==(t=window.Intl?window.Intl.DateTimeFormat().resolvedOptions().timeZone:t)&&"Etc/Unknown"!==t?t:(new Date).getTimezoneOffset())!==e&&setCookie("jl_timezone",0===t?"0":t)}function urlSearchQuery(t={}){let i=""
var o=Object.keys(t)
if(o.length){let e=0
for(const l of o)void 0!==t[l]&&(i+=(0===e?"?":"&")+l+"="+encodeURIComponent(t[l]),e++)}return i}function getQueryParam(e,t=window.location.href){e=e.replace(/[\[\]]/g,"\\$&")
e=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t)
if(e)return e[2]?decodeURIComponent(e[2].replace(/\+/g," ")):""}function getCurrentPath(e){var t=window.location.pathname
return e=langPrefix.test(t)?t.substring(0,3)+e:e}function ajaxRequest(e,o={},l="GET",a=!1){return new Promise((t,i)=>{e=a?e:getCurrentPath(e),$.ajax({type:l,url:e,data:o,beforeSend:function(e,t){/^(GET|HEAD|OPTIONS|TRACE)$/.test(t.type)||this.crossDomain||(t=document.querySelector("[name=csrfmiddlewaretoken]").value,e.setRequestHeader("X-CSRFToken",t))}}).done(e=>t(e)).fail(e=>i(e))})}function isScrolledIntoView(e,t){var i,o,l,a,n
return 0!==e.length&&(e="string"==typeof e?$(e):e,o=(i=$(window).scrollTop())+$(window).height(),a=(l=e.offset().top)+e.height(),t&&0<t?(n=(a-i)/e.height()*100,e=(o-l)/e.height()*100,t<=n&&t<=e):l<=o&&i<=a)}function isElementVisible(e,t,i={}){duration=i.duration||2e3,minVisible=i.minVisible||80,clearTimeout(elementVisibleTimeout),elementVisibleTimeout=setTimeout(function(){if(isScrolledIntoView(e,minVisible)&&(sendElementVisibleEvent(e),"function"==typeof t))return t()},duration)}function copyLink(){var e,t
navigator.clipboard?navigator.clipboard.writeText(window.location.href):document.execCommand&&(e=window.location.href,(t=document.createElement("input")).classList.add("visually-hidden"),t.value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t))}function scrollToTop(){$("html, body").animate({scrollTop:0},"fast")}function disableBodyScroll(){$("body").addClass("noscroll")}function enableBodyScroll(){$("body").removeClass("noscroll")}function createPaginator(l,a=null,e=".paginator"){const n=$(e)
function t(e,t,i,o=null){n&&((t=document.createElement(t)).classList.add("paginator__item"),o&&t.classList.add(o),t.innerHTML=i,t.href="function"==typeof l?l(e):l,"function"==typeof a&&(t.onclick=a.bind(this,e)),n.append(t))}t(1,"a","<<",1===pageIndex?"disabled":""),t(pageIndex-1,"a","<",1===pageIndex?"disabled":"")
let i=11
IS_TABLET?i=10:IS_MOBILE&&(i=6)
let o,s
s=pageIndex-5<1&&pageIndex+5>pageCount?(o=1,pageCount):pageIndex+5>pageCount?(o=pageCount-i+1,pageCount):pageIndex-5<1?(o=1,i):(o=pageIndex-5,pageIndex+5),o<1&&(o=1),s>pageCount&&(s=pageCount)
for(let e=o;e<=s;e++)t(e,"a",e,e===pageIndex?"active":"")
pageIndex+5<pageCount&&t(pageIndex,"div","···","disabled"),t(pageIndex+1,"a",">",pageIndex===pageCount?"disabled":""),t(pageCount,"a",">>",pageIndex===pageCount?"disabled":"")}function initPopupVideo(e,t){(e=e instanceof jQuery?e:$(e)).magnificPopup({preloader:!1,removalDelay:200,...t,type:"iframe"})}function initPopupPhoto(e,t){(e=e instanceof jQuery?e:$(e)).magnificPopup({...t,type:"image"})}function _sendEvent(e,t){if("function"==typeof gtag)return gtag("event",e,t)}function prepareVideoEventData(e){return{video_current_time:e.currentTime,video_duration:e.duration,video_percent:e.percent,video_provider:e.provider,video_title:e.title,video_url:e.url}}function sendVideoStartEvent(e){_sendEvent("video_start",prepareVideoEventData(e))}function sendVideoCompleteEvent(e){_sendEvent("video_complete",prepareVideoEventData(e))}function sendVideoProgressEvent(e){_sendEvent("video_progress",prepareVideoEventData(e))}function sendSelectContentEvent(e,t){_sendEvent("select_content",{content_type:e,item_id:t=e+":"+t})}function sendSearchEvent(e,t){_sendEvent("search",{search_term:t=e+":"+t})}function sendSelectSearchResultEvent(e,t,i,o,l){_sendEvent("select_search_result",{content_type:e,content_key:t,search_term:i,link_url:o,link_domain:l})}function sendElementClickEvent(e,t,i){_sendEvent("element_click",{element_id:e,element_text:t,element_class_name:i})}function sendElementVisibleEvent(e){_sendEvent("element_visible",{element_class_name:e})}function sendParallaxEngagedEvent(e){_sendEvent("parallax_engaged",{element_class_name:e})}function sendAppInstallAcceptedEvent(){_sendEvent("pwa_prompt",{value:"accept"})}function sendAppInstallRejectedEvent(){_sendEvent("pwa_prompt",{value:"reject"})}function sendAppInstallSuccessEvent(){_sendEvent("pwa_install",{value:1})}function sendAppInstallDisplayEvent(){_sendEvent("pwa_display",{value:1})}!function(e){e.event.special.touchstart={setup:function(e,t,i){this.addEventListener("touchstart",i,{passive:!t.includes("noPreventDefault")})}},e.event.special.touchmove={setup:function(e,t,i){this.addEventListener("touchmove",i,{passive:!t.includes("noPreventDefault")})}},e.event.special.wheel={setup:function(e,t,i){this.addEventListener("wheel",i,{passive:!0})}},e.event.special.mousewheel={setup:function(e,t,i){this.addEventListener("mousewheel",i,{passive:!0})}},checkTimezone()
let t
const i=e(".floating-buttons")
e=i.find(".floating-button--backtotop")
const o=i.find(".floating-button--copylink")
window.addEventListener("scroll",e=>{clearTimeout(t),t=setTimeout(()=>{250<=this.scrollY?i.css({opacity:1,visibility:"visible"}):i.css({opacity:0,visibility:"hidden"})},250)}),e.click(function(){scrollToTop()}),o.click(function(){copyLink(),o.addClass("floating-button--tooltip"),setTimeout(function(){o.removeClass("floating-button--tooltip")},2e3)}),document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll(".no-transition").forEach(e=>e.classList.remove("no-transition")),document.querySelectorAll(".no-animation").forEach(e=>e.classList.remove("no-animation"))})}(jQuery),"serviceWorker"in navigator?window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js")}):console.error("Browser does not support service workers.")
let deferredPrompt
const installButton=$(".floating-button--install").css("display","none"),cookieSettings=(window.addEventListener("beforeinstallprompt",e=>{e.preventDefault(),deferredPrompt=e,installButton.css("display","flex"),sendAppInstallDisplayEvent()}),window.addEventListener("appinstalled",()=>{installButton.css("display","none"),deferredPrompt=null,sendAppInstallSuccessEvent()}),installButton.click(e=>{deferredPrompt.prompt(),deferredPrompt.userChoice.then(e=>{("accepted"===e.outcome?sendAppInstallAcceptedEvent:sendAppInstallRejectedEvent)(),deferredPrompt=null})}),!function(){let t
function i(e,o){let t
"IntersectionObserver"in window&&(t=new IntersectionObserver((e,t)=>{for(const i of e)i.isIntersecting&&(t.unobserve(i.target),o(i.target))}))
for(const i of e)void 0!==t?t.observe(i):o(i)}!function e(){t&&(t.disconnect(),t=null),requestAnimationFrame(()=>{i(document.querySelectorAll("img.lazy"),e=>{const t=e.classList.contains("club-emblem__image"),i=e.classList.contains("player-photo")
var o=e.getAttribute("data-src")
e.onerror=()=>{t?(e.src="/static/images/club-emblem-placeholder.svg",e.classList.add("club-emblem__image--placeholder")):i?(e.src="/static/images/player-avatar-placeholder.svg",e.classList.add("player-photo--placeholder")):e.classList.add("d-none")},e.onload=()=>{e.naturalWidth&&(e.width=Math.round(e.naturalWidth)),e.naturalHeight&&(e.height=Math.round(e.naturalHeight))},o&&(e.src=o),e.src&&e.classList.remove("lazy")}),i([...document.querySelectorAll("div.lazy"),...document.querySelectorAll("header.lazy")],e=>{let t=e.getAttribute("data-src")
t&&(t=t.includes("url")?t:`url("${t}")`,e.style.backgroundImage?e.style.backgroundImage=e.style.backgroundImage+", "+t:e.style.backgroundImage=t,e.removeAttribute("data-src"),e.classList.remove("lazy"))})}),(t=new MutationObserver(e)).observe(document.body,{childList:!0,subtree:!0})}()}(),function(){const i="jl_consent",h=2,o=7
let g,d
function c(e){var t
e&&(t=e,"function"==typeof fbq&&(t=t.targeting?"grant":"revoke",fbq("consent",t)),t=e,"function"==typeof gtag)&&(t={ad_storage:t.targeting?"granted":"denied",personalization_storage:t.targeting?"granted":"denied",analytics_storage:t.performance?"granted":"denied",functionality_storage:t.functional?"granted":"denied",security_storage:t.functional?"granted":"denied"},gtag("consent","update",t))}function u(e=!1){var t={version:h,functional:!0,performance:!0,targeting:!0}
!e&&g&&(t.functional=g.querySelector("#functional").checked,t.performance=g.querySelector("#performance").checked,t.targeting=g.querySelector("#targeting").checked),setCookie(i,window.btoa(JSON.stringify(t)),o),c(t),g&&(g.classList.add("cookie-settings--closed"),enableBodyScroll()),d&&d.classList.remove("cookie-consent--show")}function p(){var e=getCookie(i)
return e?JSON.parse(window.atob(e)):null}return{initCookieSettings:function(e=!1,t){var i,o,l,a,n,s
i=!(!(i=p())||i.version!==h||(c(i),0))
if(!i||e){e=(d=document.querySelector(".cookie-consent")).querySelector("#cookie-settings"),o=d.querySelector("#cookie-accept-all"),l=(g=document.querySelector(".cookie-settings")).querySelector(".close"),a=g.querySelector("#cookie-save"),n=g.querySelector("#cookie-accept-all"),s=g.querySelectorAll(".cookie-item.accordion .accordion-header")
i||d.classList.add("cookie-consent--show"),e.onclick=()=>{g.classList.remove("cookie-settings--closed"),disableBodyScroll()},l.onclick=()=>{g.classList.add("cookie-settings--closed"),enableBodyScroll()}
for(const r of s)r.onclick=e=>{e.target.closest(".checkbox")||e.target.parentNode.classList.toggle("accordion--open")}
o.onclick=()=>u(!0),n.onclick=()=>u(!0),a.onclick=()=>u(),t&&(document.querySelector(t).onclick=()=>{var e;(e=p())&&(g.querySelector("#functional").checked=e.functional,g.querySelector("#performance").checked=e.performance,g.querySelector("#targeting").checked=e.targeting),g.classList.remove("cookie-settings--closed"),disableBodyScroll()})}}}}()),competitionDropdown=(document.addEventListener("DOMContentLoaded",function(e){cookieSettings.initCookieSettings()}),!function(){const g="header nav .language-chooser",d="language-choices--opened"
let c,u=!1
const p="header nav .more-menu",m="more-menu-modal--opened"
let v,f=!1
function _(e){var t=e.querySelectorAll(".language-choice")
const i=e.querySelector("form")
for(const o of t)o.onclick=e=>{var t
e=e,t=i,(e=e.target.getAttribute("data-value"))&&(t.language.value=e,t.submit())}}document.addEventListener("DOMContentLoaded",function(e){var t,i,o
if((i=document.querySelector(g))&&(t=i.querySelector(".language-button"),c=i.querySelector(".language-choices"),t)&&c&&(t.onclick=()=>{c.classList.toggle(d),u=!u},_(c)),i=document.querySelector(p)){t=i.querySelector(".more-menu-trigger")
if(v=i.querySelector(".more-menu-modal"),t&&v){t.onclick=()=>{v.classList.toggle(m),f=!f}
i=v.querySelector(".more-menu-nav .more-menu-nav__item--language")
const l=v.querySelector(".more-menu-nav .language-choices"),a=i.querySelector(".arrow")
i&&l&&(i.onclick=()=>{l.classList.toggle(d),a.classList.toggle("arrow--invert")},_(l))}}{i=document.querySelector("header .nav-container .mobile-menu-trigger")
const n=document.querySelector("header .nav-container .mobile-menu-modal"),s=(o=n.querySelector("#mobile-menu-modal-close"),document.querySelector("body"))
if(n){i&&(i.onclick=()=>{n.classList.toggle("d-none"),s.classList.toggle("noscroll"),s.classList.toggle("body--mobile-menu")}),o&&(o.onclick=()=>{n.classList.add("d-none"),s.classList.remove("noscroll"),s.classList.remove("body--mobile-menu")})
i=n.querySelector(".mobile-menu-nav .mobile-menu-nav__item--language")
const r=n.querySelector(".mobile-menu-nav .language-choices"),h=i.querySelector(".arrow")
i&&r&&(i.onclick=()=>{r.classList.toggle(d),h.classList.toggle("arrow--invert")},_(r))}}window.addEventListener("click",e=>{u&&c&&!e.target.closest(g)&&(c.classList.remove(d),u=!1),f&&v&&!e.target.closest(p)&&(v.classList.remove(m),f=!1)},!1)})}(),!function(e){e(document).ready(function(){const t=e(".header-teams-list__teams"),i=e(".header-teams-list__competitions__selector"),o=(e="j1")=>ajaxRequest(`/widgets/teams_list/${e}/`).then(e=>{t.empty(),t.append(e)})
i.change(()=>{var e=i.val()
sendElementClickEvent("header-teams-list",e,".header-teams-list__competitions__selector"),o(e)}),o()})}(jQuery),function(){const n=".competition-dropdown__items",i=".competition-dropdown__value",t="competition-dropdown__items--visible",s=".dropdown-item",r="dropdown-item--selected",h=".competition-logo",g="competition-logo--selected",d={}
let o,c,l=!1
function u(){void 0!==o&&(o.css("opacity",0),o.removeClass(t))}function p(e){e.stopPropagation(),c=$(this),(o=c.parent().find(n))&&0!==o.length&&(sendElementClickEvent("competition-dropdown","",i),(l=!l)?void 0!==o&&(o.css("opacity",1),o.addClass(t)):u())}return{init:function(l,a){var e,t=$(l)
t&&0!==t.length&&(e=t.find(i))&&0!==e.length&&((d[l]=e).click(p),t.find(n).find(s).each(function(){$(this).click(function(e){e.stopPropagation(),e.preventDefault()
{e=this
var t=l,i=a
const o=(e=$(e)).data("value")
sendElementClickEvent("competition-dropdown",o,n),e.parent().find(s).each(function(){$(this).removeClass(r)}),e.addClass(r),d[t].find(h).each(function(){var e=$(this),t=h.replace(".","")
e.hasClass(g)&&e.removeClass(g),e.hasClass(t+"--"+o)&&e.addClass(g)}),"function"==typeof i&&i(o,t)}})}),$(document).on("mouseup",function(e){!c||c.is(e.target)||0!==c.has(e.target).length||u()}),$(document).on("scroll",function(e){u()}))}}}())
class GoalHighlights{constructor(e,t={}){this.selector=e,this.swiperOptions=t,this.highlightVideoModalSelector=".video-modal",this.highlightVideoModalBackdropSelector=".video-modal__backdrop",this.highlightVideoModalCloseSelector=".video-modal__close-button",this.highlightVideoModalAreaSelector=".video-modal__content",this.highlightVideoPlayerWrapperSelector=".highlight-video-wrapper",this.highlightVideoPlayerSelector=".highlight-video-player",this.highlightVideoNavSelector=".highlight-video-nav",this.goalHighlightWrapperSelector=".goal-highlights",this.goalHighlightVideosWrapperSelector=this.selector+" .videos-list",this.goalHighlightLimit=6,this.goalHighlightReachEndGap=3,this.goalHighlightCompetition=void 0,this.goalHighlightClub=void 0,this.goalHighlightPlayer=void 0,this.goalHighlightMatch=void 0,this.goalHighlightOffset=0,this.goalHighlightIsFirstLoading=!0,this.goalHighlightLastVideoReach=!1,this.goalHighlightIsVideoModalOpened=!1,this.goalHighlightVideos={},this.goalHighlightVideoIds=[],this.goalHighlightCurrentVideoId=void 0,this.goalHighlightSwiper=void 0,this.goalHighlightVideoModal=void 0,this.goalHighlightVideoModalArea=void 0,this.goalHighlightVideoModalBackdrop=void 0,this.goalHighlightVideoModalClose=void 0,this.goalHighlightVideoPlayerWrapper=void 0,this.goalHighlightVideoPlayer=void 0,this.goalHighlightNextButton=void 0,this.goalHighlightPrevButton=void 0,this.goalHighlightVideoProgressInterval=void 0,this.goalHighlightVideoProgressCheckpoints=void 0,this.goalHighlightFetchVideosTimeout=void 0,this.goalHighlightIsBlocked=!1,this.wrapperElement=void 0,this.mode="standalone",this.goalHighlightLikeButton=void 0,this.goalHighlightShareButton=void 0,this.highlightVideoLikeSelector=".action-button--like",this.highlightVideoShareSelector=".action-button--share",this.goalHighlightModalVideoNav=void 0,this.goalHighlightModalOffsetStart=0,this.goalHighlightModalOffsetEnd=0,this.goalHighlightModalVideoNavReachOldest=!1,this.goalHighlightModalVideoNavReachLatest=!1,this.goalHighlightUrlPath="",this.initialize()}_goalHighightModalClose(){this.goalHighlightIsVideoModalOpened=!1,this._destroyGoalHighightVideoPlayer(),this.goalHighlightVideoModal.css("opacity","0"),this.goalHighlightVideoModal.css("visibility","hidden"),$(document).off("keyup"),enableBodyScroll(),this._destroyModalVideoNav()}_goalHighightModalOpen(){this.goalHighlightIsVideoModalOpened=!0,disableBodyScroll(),$(document).on("keyup",e=>{27===e.which&&this.goalHighlightIsVideoModalOpened&&this._goalHighightModalClose()}),this.goalHighlightVideoModal.css("visibility","visible"),this.goalHighlightVideoModal.css("opacity","1")}_initGoalHighightVideoProgressInterval(i){this._clearGoalHighightVideoProgressInterval(),this.goalHighlightVideoProgressInterval=setInterval(()=>{var e=this.goalHighlightVideoPlayer.currentTime(),t=this.goalHighlightVideoPlayer.duration(),e=(i.duration=t,(i.currentTime=e)/t*100)
90<=e&&!this.goalHighlightVideoProgressCheckpoints[90]?(this.goalHighlightVideoProgressCheckpoints[90]=!0,i.percent=90,sendVideoProgressEvent(i)):75<=e&&!this.goalHighlightVideoProgressCheckpoints[75]?(this.goalHighlightVideoProgressCheckpoints[75]=!0,i.percent=75,sendVideoProgressEvent(i)):50<=e&&!this.goalHighlightVideoProgressCheckpoints[50]?(this.goalHighlightVideoProgressCheckpoints[50]=!0,i.percent=50,sendVideoProgressEvent(i)):25<=e&&!this.goalHighlightVideoProgressCheckpoints[25]?(this.goalHighlightVideoProgressCheckpoints[25]=!0,i.percent=25,sendVideoProgressEvent(i)):10<=e&&!this.goalHighlightVideoProgressCheckpoints[10]&&(this.goalHighlightVideoProgressCheckpoints[10]=!0,i.percent=10,sendVideoProgressEvent(i))},1e3)}_clearGoalHighightVideoProgressInterval(){this.goalHighlightVideoProgressInterval&&(clearInterval(this.goalHighlightVideoProgressInterval),this.goalHighlightVideoProgressInterval=null)}_initGoalHighightVideoPlayer(e){this.goalHighlightVideoProgressCheckpoints={10:!1,25:!1,50:!1,75:!1,90:!1}
let t=!0,i=!0,o=0
const l={currentTime:null,duration:null,percent:null,provider:"WSC",title:e.title,url:e.video_file}
e=this.goalHighlightVideoPlayerWrapper.find(this.highlightVideoPlayerSelector)[0]
this.goalHighlightVideoPlayer=videojs(e,{controls:!0,autoplay:!0,loop:!1,preload:"auto",aspectRatio:"16:9",controlBar:{pictureInPictureToggle:!1}}),this.goalHighlightVideoPlayer.on("play",()=>{t&&(t=!1,sendVideoStartEvent({...l,currentTime:0,duration:this.goalHighlightVideoPlayer.duration(),percent:0})),this._initGoalHighightVideoProgressInterval(l)}),this.goalHighlightVideoPlayer.on("pause",()=>{this._clearGoalHighightVideoProgressInterval()}),this.goalHighlightVideoPlayer.on("ended",()=>{o++,i&&(i=!1,sendVideoCompleteEvent({...l,currentTime:this.goalHighlightVideoPlayer.duration(),duration:this.goalHighlightVideoPlayer.duration(),percent:100})),o<3&&this.goalHighlightVideoPlayer.play(),this._clearGoalHighightVideoProgressInterval()})}_destroyGoalHighightVideoPlayer(){void 0!==this.goalHighlightVideoPlayer&&(this.goalHighlightVideoPlayer.dispose(),this.goalHighlightVideoPlayer=void 0),this._clearGoalHighightVideoProgressInterval()}loadVideos(t,n,s=!0){const r=this
r.goalHighlightFetchVideosTimeout&&clearTimeout(r.goalHighlightFetchVideosTimeout),r.goalHighlightFetchVideosTimeout=setTimeout(()=>{if(r.goalHighlightSwiper){n&&(r.goalHighlightVideos={},r.goalHighlightVideoIds=[],r.goalHighlightOffset=0,r.goalHighlightIsFirstLoading=!0,r.goalHighlightLastVideoReach=!1)
const a=$(r.goalHighlightVideosWrapperSelector)
let l=!1
r.goalHighlightIsFirstLoading&&(l=!0,r.goalHighlightIsFirstLoading=!1,s)&&a.addClass("loading")
var e="/widgets/goal_highlights/"
return ajaxRequest(e+=urlSearchQuery({offset:t,competition:r.goalHighlightCompetition,club:r.goalHighlightClub,player:r.goalHighlightPlayer,match:r.goalHighlightMatch})).then(e=>{if(n&&r.goalHighlightSwiper.removeAllSlides(),e.blocked)r.goalHighlightIsBlocked=!0
else{var t,i=e.html_events,e=e.events
if(i&&i.length&&r.goalHighlightSwiper.appendSlide(i),e&&e.length)for(const o of e)"null"!==o&&(t=JSON.parse(o),r.goalHighlightVideos[t.id]=t,r.goalHighlightVideoIds.push(t.id))
l||0!==e.length||(r.goalHighlightLastVideoReach=!0),l&&(s&&a.removeClass("loading"),r._toggleGoalHighlights())}}).catch(e=>{console.error(e)})}},500)}_loadVideo(e){if(!this.goalHighlightIsBlocked&&void 0!==e){this.goalHighlightVideoPlayerWrapper.addClass("loading"),this.goalHighlightVideoModalClose&&this.goalHighlightVideoModalClose.css("opacity","0")
let i=this.goalHighlightVideoIds.indexOf(e)
var t=Math.floor(i/this.goalHighlightLimit)*this.goalHighlightLimit,o=(this.goalHighlightModalOffsetStart=t,this.goalHighlightModalOffsetEnd=t,i=0==t?i:i-t,"/widgets/goal_highlights/")
return ajaxRequest(o+=urlSearchQuery({offset:t,competition:this.goalHighlightCompetition,club:this.goalHighlightClub,player:this.goalHighlightPlayer,match:this.goalHighlightMatch,event_id:e})).then(e=>{var t
e.blocked||(this.goalHighlightVideoPlayerWrapper&&(this.goalHighlightVideoPlayerWrapper.empty(),this.goalHighlightVideoPlayerWrapper.append(e.html_events),t=JSON.parse(e.event),this._initGoalHighightVideoPlayer(t),sendSelectContentEvent("goal_highlight_video",t.title),this._initLikeButton(e),this._initShareButton(e),this._initModalVideoNav(i,e.html_item_list),this.goalHighlightVideoModalClose=this.goalHighlightVideoPlayerWrapper.find(this.highlightVideoModalCloseSelector),this.goalHighlightVideoModalClose.click(this._goalHighightModalClose.bind(this))),this.goalHighlightVideoPlayerWrapper.removeClass("loading"))}).catch(e=>{console.error(e)})}}_loadVideoModal(e,i){return ajaxRequest(`/widgets/goal_highlights/${e}/`).then(e=>{var t=this.goalHighlightVideoPlayerWrapper.find(".highlight-video"),t=(document.querySelector(".highlight-video__container").remove(),t.append(e.html_event),i.parent().find(".video-item--active").removeClass("video-item--active"),i.addClass("video-item--active"),this._initLikeButton(e),this._initShareButton(e),JSON.parse(e.event))
this._initGoalHighightVideoPlayer(t)}).catch(e=>{console.error(e)})}_onGoalHighightReachEnd(){this.goalHighlightIsFirstLoading||this.goalHighlightLastVideoReach||(this.goalHighlightOffset=this.goalHighlightOffset+this.goalHighlightLimit,this.loadVideos(this.goalHighlightOffset))}_onGoalHighightVideoSelected(e,t){t.stopPropagation(),this._goalHighightModalOpen()
t=$(t.target).data()
this.goalHighlightCurrentVideoId=t.vid,this.goalHighlightUrlPath=t.url,this._loadVideo(this.goalHighlightCurrentVideoId),sendElementClickEvent("match_video_event_"+this.goalHighlightCurrentVideoId,t.title,"video-item")}_toggleGoalHighlights(){var e="sidebar"===this.mode?this.wrapperElement:this.wrapperElement.parent()
0===this.goalHighlightVideoIds.length||this.goalHighlightIsBlocked?e.addClass("d-none"):e.removeClass("d-none")}_getElements(){this.wrapperElement=$(this.goalHighlightWrapperSelector),this.goalHighlightVideoModal=$(this.highlightVideoModalSelector),this.goalHighlightVideoModalBackdrop=this.goalHighlightVideoModal.find(this.highlightVideoModalBackdropSelector),this.goalHighlightVideoModalArea=this.goalHighlightVideoModal.find(this.highlightVideoModalAreaSelector),this.goalHighlightVideoPlayerWrapper=this.goalHighlightVideoModalArea.find(this.highlightVideoPlayerWrapperSelector),this.goalHighlightVideoModalBackdrop.click(this._goalHighightModalClose.bind(this))}_onLikeButtonClick(){sendElementClickEvent("goal-highlight-like-button",this.goalHighlightCurrentVideoId,this.highlightVideoLikeSelector)
const t=this.goalHighlightLikeButton,i=t.hasClass("action-button--highlight")?"unlike":"like",o=t.find(".action-button__text")
var e={status_like:i}
return ajaxRequest(`/widgets/goal_highlights/${this.goalHighlightCurrentVideoId}/like/`,e,"POST").then(function(e){"like"==i?t.addClass("action-button--highlight"):t.removeClass("action-button--highlight"),"number"==typeof e.like_count&&0<e.like_count?o.html(e.like_count):o.html(0)}).catch(e=>{console.error(e)})}_initLikeButton(e){var t
this.goalHighlightLikeButton=this.goalHighlightVideoPlayerWrapper.find(this.highlightVideoLikeSelector),e.like_status&&this.goalHighlightLikeButton.addClass("action-button--highlight"),"number"==typeof e.like_count&&0<e.like_count&&(t=this.goalHighlightLikeButton.find(".action-button__text"))&&t.html(e.like_count),this.goalHighlightLikeButton.click(()=>this._onLikeButtonClick())}_onShareButtonClick(){if(sendElementClickEvent("goal-highlight-share-button",this.goalHighlightCurrentVideoId,this.highlightVideoShareSelector),""!==this.goalHighlightUrlPath){var e=window.location.protocol+"//"+window.location.host+this.goalHighlightUrlPath
const t=this.goalHighlightShareButton.find(".action-button__overlay-text")
navigator.clipboard.writeText(e).then(function(){t.css("display","block"),setTimeout(()=>{t.css("display","none")},1e3)}).catch(e=>{console.error(e)})}}_initShareButton(e){this.goalHighlightShareButton=this.goalHighlightVideoPlayerWrapper.find(this.highlightVideoShareSelector),this.goalHighlightShareButton.click(()=>this._onShareButtonClick())}_onVideoNavReachBeginning(e){this.goalHighlightModalVideoNavReachLatest||(this.goalHighlightModalOffsetStart=Math.floor(this.goalHighlightModalOffsetStart/this.goalHighlightLimit-1)*this.goalHighlightLimit,this.goalHighlightModalOffsetStart<0?(this.goalHighlightModalOffsetStart=0,this.goalHighlightModalVideoNavReachLatest=!0):this._loadNavVideos(e,this.goalHighlightModalOffsetStart,!0))}_onVideoNavReachEnd(e){this.goalHighlightModalVideoNavReachOldest||(this.goalHighlightModalOffsetEnd=Math.floor(this.goalHighlightModalOffsetEnd/this.goalHighlightLimit+1)*this.goalHighlightLimit,this._loadNavVideos(e,this.goalHighlightModalOffsetEnd))}_onVideoNavSelected(e,t){var i
t.stopPropagation(),void 0!==e.clickedSlide&&(i=(t=$(e.clickedSlide)).data(),this.goalHighlightCurrentVideoId!==i.vid)&&(this.goalHighlightCurrentVideoId=i.vid,this.goalHighlightUrlPath=i.url,e.slideTo(e.clickedIndex),this._loadVideoModal(this.goalHighlightCurrentVideoId,t),sendElementClickEvent("match_video_event_"+this.goalHighlightCurrentVideoId,i.title,"video-item"))}_loadNavVideos(t,i,o=!1){t&&setTimeout(()=>{var e="/widgets/goal_highlights/"
return ajaxRequest(e+=urlSearchQuery({offset:i,competition:this.goalHighlightCompetition,club:this.goalHighlightClub,player:this.goalHighlightPlayer,match:this.goalHighlightMatch,reach:!0})).then(e=>{e.blocked||((e=e.html_item_list)&&e.length?o?(this.goalHighlightModalVideoNavReachLatest=!1,t.prependSlide(e.reverse())):(this.goalHighlightModalVideoNavReachOldest=!1,t.appendSlide(e)):o?this.goalHighlightModalVideoNavReachLatest=!0:this.goalHighlightModalVideoNavReachOldest=!0)}).catch(e=>{console.error(e)})},500)}_initModalVideoNav(e,t){t&&t.length&&(this.goalHighlightModalVideoNav=new Swiper(this.highlightVideoNavSelector,{slidesPerView:"auto",spaceBetween:16,freeMode:!0,mousewheel:!0,centeredSlides:!0,centeredSlidesBounds:!0,on:{reachBeginning:this._onVideoNavReachBeginning.bind(this),reachEnd:this._onVideoNavReachEnd.bind(this),tap:this._onVideoNavSelected.bind(this)}}),this.goalHighlightModalVideoNav.appendSlide(t),0<e)&&this.goalHighlightModalVideoNav.slideTo(e)}_destroyModalVideoNav(){this.goalHighlightModalVideoNav&&(this.goalHighlightModalVideoNav.destroy(),this.goalHighlightModalVideoNavReachOldest=!1,this.goalHighlightModalVideoNavReachLatest=!1)}initialize(){this.goalHighlightSwiper=new Swiper(this.selector,{slidesPerView:"auto",spaceBetween:30,freeMode:!0,mousewheel:!0,...this.swiperOptions,on:{reachEnd:this._onGoalHighightReachEnd.bind(this),tap:this._onGoalHighightVideoSelected.bind(this)}}),this._getElements()}destroy(){this.goalHighlightSwiper&&this.goalHighlightSwiper.destroy()}setMode(e){this.mode=e}setClub(e){this.goalHighlightClub=e}setPlayer(e){this.goalHighlightPlayer=e}setMatch(e){this.goalHighlightMatch=e}setCompetition(e){this.goalHighlightCompetition=e}setWrapperSelector(e){this.goalHighlightWrapperSelector=e,this._getElements()}setVideoWrapperSelector(e){this.goalHighlightVideosWrapperSelector=e}}const bannerSwiper=function(){const t={TOP:"top",BOTTOM:"bottom",MIDDLE:"middle"},i={TOP:".banners--top",BOTTOM:".banners--middle",MIDDLE:".banners--bottom"}
let o
return{init:function(e){return o=new Swiper(function(e){switch(e){case t.TOP:return i.TOP
case t.BOTTOM:return i.BOTTOM
case t.MIDDLE:return i.MIDDLE
default:return}}(e),{slidesPerView:"auto",centeredSlides:!0,effect:"coverflow",coverflowEffect:{rotate:0,stretch:16,depth:0,modifier:1,slideShadows:!0},pagination:{el:".swiper-pagination",clickable:!0},autoplay:{delay:3e3,disableOnInteraction:!1,pauseOnMouseEnter:!0},breakpoints:{320:{spaceBetween:24},577:{spaceBetween:32}},on:{click:function(e,t){t=t.target
t.classList.contains("swiper-slide-prev")?o.slidePrev():t.classList.contains("swiper-slide-next")&&o.slideNext()}}})}}}()
bannerSwiper.init("top")
let searchButton,searchModal,searchBackdrop,searchInput,clearButton,cancelButton,searchResult,searchResultItems,moreButton,searchTimeout,prevTerm,clubCount=0,playerCount=0,stadiumCount=0
function _selectResult(){var e=$(this),t=e.prop("href"),i=e.data("type"),e=e.data("value"),o=this.hostname
sendSelectSearchResultEvent(i,e,prevTerm||"(popular)",t,o)}function _openModalSearch(){disableBodyScroll(),_retrieveSearchResult(!0),searchModal.addClass("search-modal--active"),sendElementClickEvent(null,"search","search-modal-trigger"),setTimeout(function(){searchInput.focus()},1e3)}function _closeModalSearch(){searchModal.removeClass("search-modal--active"),searchInput.val(""),enableBodyScroll()}function _getResultElement(e){let t
return"club"===e?t=".search-result__group--clubs":"player"===e?t=".search-result__group--players":"stadium"===e&&(t=".search-result__group--stadiums"),t?searchModal.find(t):null}function _updateResultItemsCount(e){var t=_getResultElement(e)
t&&(t=t.find(".search-result__group__body"),"club"===e?clubCount=t.children().length:"player"===e?playerCount=t.children().length:"stadium"===e&&(stadiumCount=t.children().length))}function _appendMoreResult(e,t){var i,t=_getResultElement(t)
t&&(i=t.find(".search-result__group__footer"),t=t.find(".search-result__group__body"),""===e.trim()?i.addClass("d-none"):t.append(e),t.children().length%5)&&i.addClass("d-none")}function _retrieveSearchResult(t=!1,i){searchTimeout&&clearTimeout(searchTimeout),searchTimeout=setTimeout(function(){var e=searchInput.val().trim();(t||e&&2<=e.length&&e!==prevTerm)&&((prevTerm=e)&&sendSearchEvent("global",e),e={term:e,type:i},"club"===i?e.offset=clubCount:"player"===i?e.offset=playerCount:"stadium"===i&&(e.offset=stadiumCount),ajaxRequest("/search/global/",e,"POST").then(e=>{i?(_appendMoreResult(e,i),_updateResultItemsCount(i)):(searchResult.empty(),e&&e.trim()&&searchResult.append(e),_updateResultItemsCount("club"),_updateResultItemsCount("player"),_updateResultItemsCount("stadium"),_initMoreButton())}).catch(e=>console.error(e)))},500)}function _toggleClearButton(){setTimeout(function(){0<searchInput.val().length?clearButton.removeClass("d-none"):clearButton.addClass("d-none")})}function _initMoreButton(){(moreButton=$(".search-result__item--more")).click(function(){var e=$(this).data("datatype").toLowerCase()
"clubs"==e?_retrieveSearchResult(!0,"club"):"players"==e?_retrieveSearchResult(!0,"player"):"stadiums"==e&&_retrieveSearchResult(!0,"stadium"),sendElementClickEvent(null,"load_more_"+e,"search-result__item--more")})}$(document).ready(function(){searchButton=$(".search-modal-trigger"),(searchModal=$(".search-modal"))&&(searchBackdrop=searchModal.find(".search-modal__backdrop"),searchInput=searchModal.find(".search-field__input"),clearButton=searchModal.find(".search-field__clear"),cancelButton=searchModal.find(".search-field__cancel"),searchResult=searchModal.find(".search-result"),searchModal.on("click",".search-result__item:not(.search-result__item--more)",_selectResult),searchButton.click(_openModalSearch),searchBackdrop.click(_closeModalSearch),cancelButton.click(_closeModalSearch),clearButton.click(function(){searchInput.val(""),searchInput.focus()}),searchInput.keydown(function(e){13===e.which?_retrieveSearchResult(!0):(27===e.which?_closeModalSearch:(_toggleClearButton(),_retrieveSearchResult))()}))})